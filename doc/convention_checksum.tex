% This file is part of the convention of designations for IT inventory.
%
% This convention is a free document: you can redistribute it and/or modify it
% under the terms of the GNU General Public License as published by the Free
% Software Foundation, either version 3 of the License, or (at your option) any
% later version.
%
% This document is distributed in the hope that it will be useful,but WITHOUT
% ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
% FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
% more details.
%
% You should have received a copy of the GNU General Public License along with
% this document. If not, see
%
%   http://www.gnu.org/licenses/
%
%
% Copyright (C)
%   2014 Alexander Haase IT Services <support@alexhaase.de>
%

\subsection{Checksum}

To avoid errors when transferring the designation, a check digit is appended to
each designation. \\

The check digit is computed equivalent to the check digit of an
GTIN\footnote{Global Trade Item Number} \cite{ean_checksum}. It results from the modulo 34 (10
digits + 24 characters, but not ``-'') of the summed from behind digits, which
are alternately multiplied by weight of 3 and 1. \\

For the computation of the check digit, each character is interpreted as its
representive integer value (A $\rightarrow$ 10, B $\rightarrow$ 11, ...).
\textit{Note}, that ``I'' and ``O'' are not allowed in our charset, so that the
maximum integer value will be 35. \\

If the chechsum is greater 9, the result has to be written as a character.


\begin{multicols}{2}
	\begin{figure}[H]
		\centering

		\begin{tabular}{r|c|c|c|c|c|c}
			i          & 1  & 2  & 3 & 4 & 5 & 6 \\
			\hline
			$x_i$      & A  & B  & 1 & 2 & 3 & 4 \\
			weight     & 1  & 3  & 1 & 3 & 1 & 3 \\
			\hline
			$result_i$ & 10 & 33 & 1 & 6 & 3 & 12 \\
		\end{tabular}

		\begin{align*}
			\sum_{i=0}^{n} result[i] &= 65 \\
			65 \mod 34 &= 31 = W
		\end{align*}

		Complete designation: ``AB1234W''.

		\caption{Example for even $n$}
	\end{figure}

	\begin{figure}[H]
		\centering

		\begin{tabular}{r|c|c|c|c|c|c|c}
			i          & 1  & 2  & 3 & 4 & 5 & 6 & 7 \\
			\hline
			$x_i$      & A  & B  & 1 & 2 & 3 & 4 & 5 \\
			weight     & 3  & 1  & 3 & 1 & 3 & 1 & 3 \\
			\hline
			$result_i$ & 30 & 11 & 3 & 2 & 9 & 4 & 15 \\
		\end{tabular}

		\begin{align*}
			\sum_{i=0}^{n} result[i] &= 74 \\
			74 \mod 34 &= 6
		\end{align*}

		Complete designation: ``AB123456''.

		\caption{Example for odd $n$}
	\end{figure}
\end{multicols}


This algorithm could be written as mathematical function for the string $x$ with
length $n$:
\begin{align*}
	f(x, n) &= \left(\sum_{i=1}^{n} x_i \cdot \left(1 + 2 \cdot \left( \left(
		n - i + 1 \right) \mod 2 \right) \right) \right) \mod 34
\end{align*}
