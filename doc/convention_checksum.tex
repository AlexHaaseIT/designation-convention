% This file is part of the convention of designations for IT inventory.
%
% This convention is a free document: you can redistribute it and/or modify it
% under the terms of the GNU General Public License as published by the Free
% Software Foundation, either version 3 of the License, or (at your option) any
% later version.
%
% This document is distributed in the hope that it will be useful,but WITHOUT
% ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
% FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
% more details.
%
% You should have received a copy of the GNU General Public License along with
% this document. If not, see
%
%   http://www.gnu.org/licenses/
%
%
% Copyright (C)
%   2014 Alexander Haase IT Services <support@alexhaase.de>
%

\subsection{Checksum}

To avoid errors when transferring the designation, a check digit is appended to
each designation. \\

For the computation of the check digit, each character is interpreted as its
representive integer value (A $\rightarrow$ 10, B $\rightarrow$ 11, ...).
\textit{Note}, that ``I'' and ``O'' are not allowed in our charset, so that $Z$
will become 34 instead of 36! \\

The check digit is computed equivalent to the check digit of an
GTIN\footnote{Global Trade Item Number}. It results from the modulo 10 of the
summed from behind digits, which are alternately multiplied by 3 and 1. \\



This algorithm could be written as mathematical function for the string $x$ with
length $n$:
\begin{align*}
	a &= n \mod 2 \\
	b &= (n + 1) \mod 2 \\
	\\
	f(x, n) &= \left(\sum_{i = a}^{\frac{n - 1}{2}} x_{2i + b}
		+ 3 * \sum_{i = b}^{\frac{n - 1}{2}} x_{2i + a}\right)
		\mod 34
\end{align*}





\textbf{\underline{Example:}}
For the following calulation the basic designation will be ``AB12345''.

\begin{align*}
	x &= AB12345 \rightarrow \{10, 11, 1, 2, 3, 4, 5\} \\
	\\
	n &= \#x = 7 \\
	a &= n \mod 2 = 7 \mod 2 = 1 \\
	b &= (n + 1) \mod 2 = (7 + 1) \mod 2 = 8 \mod 2 = 0 \\
	\\
	f(x, n) &= \left( \sum_{i = a}^{\frac{n - 1}{2}} x_{2i + b}
			+ 3 * \sum_{i = b}^{\frac{n - 1}{2}} x_{2i + a} \right)
			\mod 34 \\
		&= \left( \sum_{i = 1}^{\frac{7 - 1}{2}} x_{2i + 0}
			+ 3 * \sum_{i = 0}^{\frac{7 - 1}{2}} x_{2i + 1} \right)
			\mod 34 \\
		&= \left( \sum_{i = 1}^{3} x_{2i}
			+ 3 * \sum_{i = 0}^{3} x_{2i + 1}\right)
			\mod 34 \\
		&= \left( 11 + 2 + 4 + 3 * \left(10 + 1 + 3 + 5 \right) \right) \mod 34 \\
		&= \left( 17 + 3 * 19 \right) \mod 34 \\
		&= \left( 17 + 57 \right) \mod 34 \\
		&= 74 \mod 34 \\
		&= 6
\end{align*}

So the complete designation would be ``AB123456''.
