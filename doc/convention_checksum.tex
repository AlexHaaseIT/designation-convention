% This file is part of the convention of designations for IT inventory.
%
% This convention is a free document: you can redistribute it and/or modify it
% under the terms of the GNU General Public License as published by the Free
% Software Foundation, either version 3 of the License, or (at your option) any
% later version.
%
% This document is distributed in the hope that it will be useful,but WITHOUT
% ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
% FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
% more details.
%
% You should have received a copy of the GNU General Public License along with
% this document. If not, see
%
%   http://www.gnu.org/licenses/
%
%
% Copyright (C)
%   2014 Alexander Haase IT Services <support@alexhaase.de>
%

\subsection{Checksum}

To avoid errors when transferring the designation, a check digit is appended to
each designation. \\

For the computation of the check digit, each character is interpreted as its
representive integer value (A $\rightarrow$ 10, B $\rightarrow$ 11, ...).
\textit{Note}, that ``I'' and ``O'' are not allowed in our charset, so that $Z$
will become 34 instead of 36! \\

The check digit is computed equivalent to the check digit of an
GTIN\footnote{Global Trade Item Number}. It results from the modulo 34 (10
digits + 24 characters) of the summed from behind digits, which are alternately
multiplied by 3 and 1. \\


This algorithm could be written as mathematical function for the string $x$ with
length $n$:
\begin{align*}
	f(x, n) &= \left(\sum_{i=1}^{n} x_i \cdot \left(1 + 2 \cdot \left( \left(
		n - i + 1 \right) \mod 2 \right) \right) \right) \mod 34
\end{align*}

If $f(x, n) > 9$, the result has to be written as a character. \\


\textbf{\underline{Example:}}
For the following calulation the basic designation will be ``AB12345''.

\begin{align*}
	x &= AB12345 \rightarrow \{10, 11, 1, 2, 3, 4, 5\} \\
	n &= \#x = 7 \\
	\\
	f(x, n) &= \left(\sum_{i=1}^{n} x_i \cdot \left(1 + 2 \cdot \left( \left(
		n - i + 1 \right) \mod 2 \right) \right) \right) \mod 34 \\
		&= \left(\sum_{i=1}^{7} x_i \cdot \left(1 + 2 \cdot \left( \left(
			8 - i \right) \mod 2 \right) \right) \right) \mod 34 \\
		&= \left(
			x_1 \cdot 3 + x_2 \cdot 1 + x_3 \cdot 3 + x_4 \cdot 1 +
			x_5 \cdot 3 + x_6 \cdot 1 + x_7 \cdot 3
			\right) \mod 34 \\
		&= \left( 30 + 11 + 3 + 2 + 9 + 4 + 15 \right) \mod 34 \\
		&= 74 \mod 34 \\
		&= 6
\end{align*}

So the complete designation would be ``AB123456''.
